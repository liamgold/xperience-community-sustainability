System.register(["react","@kentico/xperience-admin-components","@kentico/xperience-admin-base"],(function(e,t){var a={},r={},n={};return{setters:[function(e){a.default=e.default,a.useState=e.useState},function(e){r.Button=e.Button,r.ButtonColor=e.ButtonColor,r.ButtonSize=e.ButtonSize,r.Card=e.Card,r.Column=e.Column,r.Headline=e.Headline,r.HeadlineSize=e.HeadlineSize,r.Row=e.Row,r.Spacing=e.Spacing,r.Stack=e.Stack},function(e){n.usePageCommand=e.usePageCommand}],execute:function(){e((()=>{var e={90:e=>{"use strict";e.exports=n},126:(e,t,a)=>{const r=a(358).y;t.w=function(e){if(e||(e=1),!a.y.meta||!a.y.meta.url)throw console.error("__system_context__",a.y),Error("systemjs-webpack-interop was provided an unknown SystemJS context. Expected context.meta.url, but none was provided");a.p=r(a.y.meta.url,e)}},267:e=>{"use strict";e.exports=r},358:(e,t,a)=>{t.y=function(e,t){var a=document.createElement("a");a.href=e;for(var r="/"===a.pathname[0]?a.pathname:"/"+a.pathname,n=0,l=r.length;n!==t&&l>=0;)"/"===r[--l]&&n++;if(n!==t)throw Error("systemjs-webpack-interop: rootDirectoryLevel ("+t+") is greater than the number of directories ("+n+") in the URL path "+e);var o=r.slice(0,l+1);return a.protocol+"//"+a.host+o};Number.isInteger},726:e=>{"use strict";e.exports=a}},l={};function o(t){var a=l[t];if(void 0!==a)return a.exports;var r=l[t]={exports:{}};return e[t](r,r.exports,o),r.exports}o.y=t,o.d=(e,t)=>{for(var a in t)o.o(t,a)&&!o.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.p="";var i={};return(0,o(126).w)(1),(()=>{"use strict";o.r(i),o.d(i,{SustainabilityDashboardTemplate:()=>t,SustainabilityTabTemplate:()=>f});var e=o(726);const t=({label:t})=>{const[a,r]=(0,e.useState)(t);return e.default.createElement("div",null,e.default.createElement("h1",null,a),e.default.createElement("p",null,"Coming soon: https://github.com/liamgold/xperience-community-sustainability/issues/4."))};var a=o(267),r=o(90),n=function(e){return e[e.Available=0]="Available",e[e.NotAvailable=1]="NotAvailable",e}(n||{});const l={"A+":"Extremely efficient",A:"Very efficient",B:"Efficient",C:"Moderate efficiency",D:"Low efficiency",E:"Poor efficiency",F:"Very poor efficiency"},s={"A+":{primary:"#059669",bg:"#d1fae5",border:"#6ee7b7"},A:{primary:"#16a34a",bg:"#dcfce7",border:"#86efac"},B:{primary:"#65a30d",bg:"#ecfccb",border:"#bef264"},C:{primary:"#ca8a04",bg:"#fef9c3",border:"#fde047"},D:{primary:"#ea580c",bg:"#ffedd5",border:"#fdba74"},E:{primary:"#dc2626",bg:"#fee2e2",border:"#fca5a5"},F:{primary:"#b91c1c",bg:"#fee2e2",border:"#f87171"}},d=({label:t,value:a,subtitle:r})=>e.default.createElement("div",{style:{padding:"20px",background:"white",border:"1px solid #e5e7eb",borderRadius:"8px",boxShadow:"0 1px 2px 0 rgba(0, 0, 0, 0.05)"}},e.default.createElement("div",{style:{fontSize:"13px",fontWeight:600,color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"8px"}},t),e.default.createElement("div",{style:{fontSize:"28px",fontWeight:700,color:"#111827",marginBottom:r?"4px":"0"}},a),r&&e.default.createElement("div",{style:{fontSize:"12px",color:"#9ca3af"}},r)),c={container:{background:"white",border:"1px solid #e5e7eb",borderRadius:"8px",overflow:"hidden"},header:{padding:"16px 20px",background:"#f9fafb",borderBottom:"1px solid #e5e7eb",display:"flex",justifyContent:"space-between",alignItems:"center"},title:{fontSize:"15px",fontWeight:600,color:"#111827"},subtitle:{fontSize:"13px",color:"#6b7280",marginTop:"2px"},badge:{padding:"4px 12px",background:"#eff6ff",color:"#1e40af",fontSize:"13px",fontWeight:600,borderRadius:"12px"},listContainer:{padding:"12px 20px"},resourceItem:e=>({padding:"12px 0",borderBottom:e?"none":"1px solid #f3f4f6"}),resourceRow:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:"12px"},resourceInfo:{flex:1,minWidth:0},fileName:{fontSize:"13px",fontWeight:500,color:"#111827",marginBottom:"2px",wordBreak:"break-word"},filePath:{fontSize:"12px",color:"#9ca3af",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},fileSize:{fontSize:"13px",fontWeight:600,color:"#6b7280",whiteSpace:"nowrap"},expandButton:{marginTop:"12px",padding:"8px 16px",background:"transparent",border:"1px solid #e5e7eb",borderRadius:"6px",fontSize:"13px",fontWeight:500,color:"#6366f1",cursor:"pointer",width:"100%",transition:"all 0.2s"}},u=({group:t,totalPageSize:a})=>{const[r,n]=(0,e.useState)(!1),l=r?t.resources.length:3;return e.default.createElement("div",{style:c.container},e.default.createElement("div",{style:c.header},e.default.createElement("div",null,e.default.createElement("div",{style:c.title},t.name),e.default.createElement("div",{style:c.subtitle},t.resources.length," resource",1!==t.resources.length?"s":""," •"," ",t.totalSize.toFixed(2)," KB")),e.default.createElement("div",{style:c.badge},(t.totalSize/a*100).toFixed(1),"% of page")),t.resources.length>0&&e.default.createElement("div",{style:c.listContainer},t.resources.slice(0,l).map(((t,a)=>{const r=t.url.split("/").pop()||t.url,n=t.url.substring(0,t.url.lastIndexOf("/")+1),o=a===l-1;return e.default.createElement("div",{key:a,style:c.resourceItem(o)},e.default.createElement("div",{style:c.resourceRow},e.default.createElement("div",{style:c.resourceInfo},e.default.createElement("div",{style:c.fileName},r),e.default.createElement("div",{style:c.filePath,title:n},n)),e.default.createElement("div",{style:c.fileSize},t.size.toFixed(2)," KB")))})),t.resources.length>3&&e.default.createElement("button",{onClick:()=>n(!r),style:c.expandButton,onMouseEnter:e=>{e.currentTarget.style.background="#f9fafb",e.currentTarget.style.borderColor="#6366f1"},onMouseLeave:e=>{e.currentTarget.style.background="transparent",e.currentTarget.style.borderColor="#e5e7eb"}},r?"Show less":`Show ${t.resources.length-3} more`)))},f=t=>{const[o,i]=(0,e.useState)(!1),[c,f]=(0,e.useState)(null),[p,m]=(0,e.useState)(t?.sustainabilityData),{execute:g}=(0,r.usePageCommand)("RunReport",{after:e=>{m(e?.sustainabilityData),i(!1),f(null)},onError:e=>{i(!1),f("Failed to run sustainability report. Please try again."),console.error("Sustainability report error:",e)}});if(null==p)return e.default.createElement("div",{style:{padding:"32px",maxWidth:"1400px",margin:"0 auto"}},e.default.createElement(a.Stack,{spacing:a.Spacing.XL},e.default.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},e.default.createElement(a.Headline,{size:a.HeadlineSize.L},"Sustainability Report")),e.default.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"400px"}},e.default.createElement(a.Card,{headline:"No Data Available",fullHeight:!1},e.default.createElement(a.Stack,{spacing:a.Spacing.L},e.default.createElement("p",{style:{fontSize:"14px",color:"#6b7280"}},t?.pageAvailability===n.Available?"Run a sustainability analysis to see your page's environmental impact.":"This page is not available for analysis."),c&&e.default.createElement("div",{style:{padding:"12px 16px",background:"#fef2f2",border:"1px solid #fecaca",borderRadius:"6px",fontSize:"13px",color:"#dc2626"}},c),t?.pageAvailability===n.Available&&e.default.createElement(a.Button,{label:"Run Analysis",color:a.ButtonColor.Primary,size:a.ButtonSize.L,disabled:o,inProgress:o,onClick:()=>{i(!0),f(null),g()}}))))));const b=s[p.carbonRating]||s.C,x=p.resourceGroups.reduce(((e,t)=>e+t.resources.length),0);return e.default.createElement("div",{style:{padding:"32px",maxWidth:"1400px",margin:"0 auto"}},e.default.createElement(a.Stack,{spacing:a.Spacing.XL},e.default.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"16px"}},e.default.createElement("div",null,e.default.createElement(a.Headline,{size:a.HeadlineSize.L},"Sustainability Report"),e.default.createElement("div",{style:{fontSize:"14px",color:"#6b7280",marginTop:"4px"}},"Last analyzed: ",p.lastRunDate)),e.default.createElement(a.Button,{label:"Run New Analysis",color:a.ButtonColor.Primary,size:a.ButtonSize.M,disabled:o,inProgress:o,onClick:()=>{i(!0),f(null),g()}})),c&&e.default.createElement("div",{style:{padding:"16px",background:"#fef2f2",border:"1px solid #fecaca",borderRadius:"8px",fontSize:"14px",color:"#dc2626"}},c),e.default.createElement("div",{style:{background:`linear-gradient(135deg, ${b.bg} 0%, white 100%)`,border:`2px solid ${b.border}`,borderRadius:"12px",padding:"40px",position:"relative",overflow:"hidden"}},e.default.createElement("div",{style:{position:"absolute",top:"-50px",right:"-50px",width:"200px",height:"200px",background:b.bg,borderRadius:"50%",opacity:.3}}),e.default.createElement(a.Row,{spacing:a.Spacing.XL},e.default.createElement(a.Column,{colsLg:6,colsMd:12},e.default.createElement("div",{style:{position:"relative",zIndex:1}},e.default.createElement("div",{style:{fontSize:"14px",fontWeight:600,color:b.primary,textTransform:"uppercase",letterSpacing:"1px",marginBottom:"12px"}},"Carbon Rating"),e.default.createElement("div",{style:{fontSize:"120px",fontWeight:900,color:b.primary,lineHeight:1,marginBottom:"16px",textShadow:`0 2px 8px ${b.bg}`}},p.carbonRating),e.default.createElement("div",{style:{fontSize:"18px",fontWeight:600,color:"#111827",marginBottom:"8px"}},l[p.carbonRating]),e.default.createElement("div",{style:{fontSize:"14px",color:"#6b7280"}},"A+"===p.carbonRating||"A"===p.carbonRating?"This page has excellent carbon efficiency.":"B"===p.carbonRating||"C"===p.carbonRating?"This page has room for improvement.":"This page needs significant optimization."))),e.default.createElement(a.Column,{colsLg:6,colsMd:12},e.default.createElement(a.Row,{spacing:a.Spacing.L,spacingY:a.Spacing.L},e.default.createElement(a.Column,{colsLg:6,colsMd:6},e.default.createElement(d,{label:"CO₂ Emissions",value:`${p.totalEmissions.toFixed(3)}g`,subtitle:"per page view"})),e.default.createElement(a.Column,{colsLg:6,colsMd:6},e.default.createElement(d,{label:"Page Weight",value:`${(p.totalSize/1024).toFixed(2)}MB`,subtitle:`${p.totalSize.toFixed(0)} KB total`})),e.default.createElement(a.Column,{colsLg:6,colsMd:6},e.default.createElement(d,{label:"Resources",value:`${x}`,subtitle:`${p.resourceGroups.length} categories`})),e.default.createElement(a.Column,{colsLg:6,colsMd:6},e.default.createElement(d,{label:"Efficiency",value:p.totalEmissions<.1?"Excellent":p.totalEmissions<.2?"Good":p.totalEmissions<.3?"Fair":"Poor",subtitle:"Overall rating"})))))),e.default.createElement("div",null,e.default.createElement(a.Headline,{size:a.HeadlineSize.M,spacingBottom:a.Spacing.L},"Resource Breakdown"),e.default.createElement(a.Stack,{spacing:a.Spacing.L},p.resourceGroups.sort(((e,t)=>t.totalSize-e.totalSize)).map((t=>e.default.createElement(u,{key:t.type,group:t,totalPageSize:p.totalSize}))))),e.default.createElement("div",{style:{padding:"24px",background:"#f0f9ff",border:"1px solid #bae6fd",borderRadius:"8px"}},e.default.createElement("div",{style:{fontSize:"15px",fontWeight:600,color:"#0c4a6e",marginBottom:"12px"}},"💡 Tips to improve your carbon footprint"),e.default.createElement("ul",{style:{margin:0,paddingLeft:"20px",color:"#075985"}},e.default.createElement("li",{style:{marginBottom:"6px"}},e.default.createElement("strong",null,"Use Image Variants")," - Configure responsive image variants with specific dimensions and aspect ratios to serve optimized versions for different contexts (hero banners, thumbnails, social media)"),e.default.createElement("li",{style:{marginBottom:"6px"}},e.default.createElement("strong",null,"Enable AIRA's Smart Optimization")," - Leverage AIRA's AI-powered features for automatic image format conversion, smart focal point detection, and automated quality optimization during uploads"),e.default.createElement("li",{style:{marginBottom:"6px"}},e.default.createElement("strong",null,"Automate Image Metadata")," - Use AIRA to automatically generate alt texts, descriptions, and tags for better SEO while reducing manual work"),e.default.createElement("li",{style:{marginBottom:"6px"}},e.default.createElement("strong",null,"Minimize CSS & JavaScript")," - Bundle and minify your assets to reduce file sizes and decrease the number of HTTP requests"),e.default.createElement("li",{style:{marginBottom:"6px"}},e.default.createElement("strong",null,"Enable Browser Caching")," - Configure cache headers for static resources to reduce repeat downloads and server load"),e.default.createElement("li",null,e.default.createElement("strong",null,"Implement Lazy Loading")," - Load images and resources only when they're needed, improving initial page load performance")))))}})(),i})())}}}));